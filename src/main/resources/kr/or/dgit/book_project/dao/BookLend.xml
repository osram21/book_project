<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.dgit.book_project.dao.BookLend">
	<resultMap type="BookInfo" id="BookInfoResult">
		<result column="b_code" property="bCode"/>
		<result column="b_name" property="bName"/>
		<result column="author" property="author"/>
		<result column="price" property="price"/>
	</resultMap>
	
	<resultMap type="PublisherInfo" id="PublisherInfoResult">
		<result column="publisher" property="publisher"/>
	</resultMap>
	
	<resultMap type="BookLend" id="BookLendResult">
		<result column="b_lend_count" property="bLendCount"/>
		<collection property="BookInfo" resultMap="BookInfoResult"></collection>
		<collection property="PublisherInfo" resultMap="PublisherInfoResult"></collection>
	</resultMap>
	
	<select id="selectIslending" parameterType="BookLend" resultMap="BookLendResult">
		SELECT b.b_code, b.b_sub_code, b_name, author, p.publisher, price, bl.b_lend_count FROM bookInfo b 
		inner join publisherInfo p on b.p_code = p.p_code 
		inner join bookLend bl on b.b_code = bl.b_code and b.b_sub_code = bl.b_sub_code
		
		
		<!-- where bl.is_lending = false -->
	</select>
	
	
</mapper>